# SP21-MedicMobile
# Setup //TODO @Andi
pip install virtualenv

python -m venv myvenv/

source myvenv/bin/activate
OR source myvenv/Scripts/activate

pip install -r requirements.txt

# Instructions //TODO @Steven 
1. Upload .xml files into the *xml-files* directory 
2. Within the scripts directory, run: `python3 xml-parse.py`
  1. This function will parse every .xml file in the directory for their field names and produce empty .yaml files in the *yaml-files* directory
3. In the *yaml-files* directory, fill in each yaml file following guidelines written in the **DATATYPE KEYS** section of this document
  1. For each string field, create a new text file in *default-text* which contains a list of strings to be sampled from
4. Within the *scripts* directory, run: `python3 data_generator.py`
5. Outputted synthetic datasets are within the synthetic-data directory


# Directory Structure //TODO @Steven
Explanation of the directory structure.
- **myvenv:** virtual environment initialization
- **scripts:** contains all executable python code for xml parsing and synthetic data generation
- **xml-files:** where users input xml files produced from forms
- **yaml-files:** contains empty .yaml files outputted from xml-parse.py. Users must manually fill out each .yaml file in this directory.
  - **default-text:** contains user inputted text files which have comma-separated string values which are sampled from in the data generator. Every string field in a .yaml file must contain a path to a specific file in this directory to sample values from.
- **synthetic-data:** contains outputted synthetic data files in the form of .csv



# Datatype Keys

## Floats //TODO @Ingrid
Floats are sampled from 8 supported distributions generated by numpy.random sampling: normal, lognormal, uniform, binomial, poisson, beta, gamma, and exponential. 
Users input desired data types, distribution names and parameters, and constraints in a YAMl file. The inputs are parsed and passed through the float generator.

The input format for the YAML file is detailed below. 

Type
Distribution:
Constraints


## Integers //TODO @Jae Hee
Integers are sampled using a Bernoulli distribution, as well as the 8 distributions used in the float generator function.
int_generator(distribution, constraints, size):
    # Extract parameters from distribution
    # Use the correct function from np and pass in proper parameters + size
    # Clip the distribution based off of lower and upper constraints
    # Convert values to int type 
    # Insert the values into a Series
The int_generator function takes in a distribution, constraints, and size, which users can input in a YAML file. 


Type: int
Distribution: bernoulli, normal, lognormal, uniform, binomial, poisson, beta, gamma, exponential
Constraints: 
int_generator({'name':'bernoulli', 'p': 0.5}, {'upper':'na', 'lower':'na'}, 10)
patient_id:
  constraints: ~
  distribution: 
    name: uniform
    a: 0
    b: 1234
  type: int

## Strings//TODO @Spencer

Strings are randomly sampled using discrete integer probability distributions. Strings to sample from are specified by //idk how
and are stored in a .txt file in ./yaml-files/default-text/. Distributions supported include all distributions supported for integers.

## Dates //TODO @Rithik

Type: Dates are being generated as a DateTime object.
Distribution: Dates are not being sampled from any type of distribution. 
Constraints: Users should input a range of years, in the form of a minimum year and a maximum year. Dates will be generated between this range of years. 


# Current Issues/Further Improvements
- Dates are randomly generated without distribution.
- Does not take into constraints regarding relationship between birthdate and deathdate
- Do not currently have a multiselect datatype
- 

# Contributors
**Data Science Society @ Berkeley - Social Good Committee** \
* Steven Chen - schen1822@berkeley.edu \
* Andi Halim - @berkeley.edu \
* Jae Hee Koh - @berkeley.edu \
* Rithik Goli - @berkeley.edu \
* Ingrid Chien - @berkely.edu \
* Spencer Jenkins - @berkeley.edu 








